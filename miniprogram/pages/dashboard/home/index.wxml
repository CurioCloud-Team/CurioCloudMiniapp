<t-navbar title="CurioCloud" fixed="{{true}}" class="custom-navbar" />

<view class="dashboard">
  <!-- è£…é¥°æ€§èƒŒæ™¯ -->
  <view class="bg-decoration">
    <view class="blur-orb blur-orb-1"></view>
    <view class="blur-orb blur-orb-2"></view>
  </view>

  <!-- é¡¶éƒ¨æ¬¢è¿åŒºåŸŸ -->
  <view class="welcome-header glass-card">
    <view class="welcome-content">
      <view class="avatar-wrapper">
        <view class="avatar-glow"></view>
        <t-avatar size="large" icon="user" class="user-avatar" />
      </view>
      <view class="welcome-text">
        <view class="greeting">ä½ å¥½ï¼Œ{{userProfile.full_name || userProfile.username}} ğŸ‘‹</view>
        <view class="subtitle">è¿™é‡Œæ˜¯ä½ çš„æ™ºæ…§å¤‡è¯¾å·¥ä½œå°</view>
      </view>
    </view>
    
    <!-- æ•°æ®ç»Ÿè®¡ -->
    <view class="stats-grid">
      <view class="stat-item">
        <view class="stat-icon-wrapper">
          <t-icon name="file-paste" size="36rpx" color="#6366f1" />
        </view>
        <view class="stat-info">
          <view class="stat-value">{{metrics.lessonCount}}</view>
          <view class="stat-label">æ•™æ¡ˆ</view>
        </view>
      </view>
      <view class="stat-item">
        <view class="stat-icon-wrapper">
          <t-icon name="image" size="36rpx" color="#8b5cf6" />
        </view>
        <view class="stat-info">
          <view class="stat-value">{{metrics.pptCount}}</view>
          <view class="stat-label">PPT</view>
        </view>
      </view>
      <view class="stat-item">
        <view class="stat-icon-wrapper">
          <t-icon name="assignment" size="36rpx" color="#a855f7" />
        </view>
        <view class="stat-info">
          <view class="stat-value">{{metrics.exerciseCount}}</view>
          <view class="stat-label">ä¹ é¢˜</view>
        </view>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½å¯¼èˆªåŒºåŸŸ -->
  <view class="section-wrapper">
    <section-header title="åŠŸèƒ½å¯¼èˆª" description="é€‰æ‹©æ¨¡å—å¿«é€Ÿå¼€å§‹"></section-header>
    <feature-card 
      title="æ•™å­¦è®¾è®¡" 
      description="åˆ›å»ºæˆ–æŸ¥çœ‹æ•™æ¡ˆ" 
      icon="book"
      data-url="/pages/teaching/design/index" 
      bindtap="navigateTo"
    />
    <feature-card 
      title="å¤‡è¯¾å¯¹è¯" 
      description="AI å¼•å¯¼å¼å¤‡è¯¾" 
      icon="chat"
      data-url="/pages/teaching/conversation/index" 
      bindtap="navigateTo"
    />
    <feature-card 
      title="ä¹ é¢˜åŠ©æ‰‹" 
      description="ç”Ÿæˆé’ˆå¯¹æ€§çš„ç»ƒä¹ " 
      icon="assignment"
      data-url="/pages/exercise/assistant/index" 
      bindtap="navigateTo"
    />
    <feature-card 
      title="å­¦æƒ…åˆ†æ" 
      description="ä¸Šä¼ æˆç»©ï¼Œç”Ÿæˆæ´å¯Ÿ" 
      icon="chart-bar"
      data-url="/pages/analysis/entry/index" 
      bindtap="navigateTo"
    />
  </view>

  <!-- æœ€è¿‘æ•™æ¡ˆåŒºåŸŸ -->
  <view class="section-wrapper">
    <section-header title="æœ€è¿‘æ•™æ¡ˆ" description="æœ€è¿‘æ›´æ–°çš„æ•™æ¡ˆ"></section-header>
    
    <view wx:if="{{lessonPlans.length === 0}}" class="empty-state glass-card">
      <view class="empty-icon">
        <t-icon name="file-add" size="80rpx" color="#a5b4fc" />
      </view>
      <view class="empty-text">æš‚æ— æ•™æ¡ˆ</view>
      <view class="empty-hint">å¿«å»åˆ›å»ºä½ çš„ç¬¬ä¸€ä»½æ•™æ¡ˆå§ï½</view>
    </view>

    <view 
      wx:for="{{lessonPlans}}" 
      wx:key="id" 
      class="lesson-card glass-card" 
      hover-class="lesson-card--active"
      bindtap="openLesson" 
      data-id="{{item.id}}"
    >
      <view class="lesson-header">
        <view class="lesson-title">{{item.title}}</view>
        <t-tag theme="primary" variant="light" size="small">{{item.subject}}</t-tag>
      </view>
      <view class="lesson-meta">
        <view class="meta-item">
          <t-icon name="layers" size="28rpx" color="#6366f1" />
          <text>{{item.grade}}</text>
        </view>
        <view class="meta-item">
          <t-icon name="time" size="28rpx" color="#a5b4fc" />
          <text>{{item.created_at}}</text>
        </view>
      </view>
      <view class="lesson-arrow">
        <t-icon name="chevron-right" size="36rpx" color="#a5b4fc" />
      </view>
    </view>
  </view>
</view>

<bottom-tab-bar active="dashboard"></bottom-tab-bar>
