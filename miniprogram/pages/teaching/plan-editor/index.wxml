<view class="page">
  <view class="section">
    <view class="form-field">
      <text class="label">标题</text>
      <input class="input" placeholder="如：函数图像导入课" value="{{form.title}}" data-field="title" bindinput="onInput" />
    </view>

    <view class="form-row">
      <view class="form-field">
        <text class="label">学科</text>
        <input class="input" placeholder="数学" value="{{form.subject}}" data-field="subject" bindinput="onInput" />
      </view>
      <view class="form-field">
        <text class="label">年级</text>
        <input class="input" placeholder="高一" value="{{form.grade}}" data-field="grade" bindinput="onInput" />
      </view>
    </view>

    <view class="form-field">
      <text class="label">教学目标</text>
      <textarea class="textarea" placeholder="描述教学目标" value="{{form.teaching_objective}}" data-field="teaching_objective" bindinput="onInput"></textarea>
    </view>

    <view class="form-field">
      <text class="label">教学大纲</text>
      <textarea class="textarea" placeholder="按行输入教学步骤" value="{{form.teaching_outline}}" data-field="teaching_outline" bindinput="onInput"></textarea>
    </view>

    <view class="activities-header">
      <text>教学活动</text>
      <button size="mini" bindtap="addActivity">添加</button>
    </view>

    <view wx:for="{{form.activities}}" wx:key="index" class="activity-card">
      <input class="input" placeholder="活动名称" data-index="{{index}}" data-field="activity_name" value="{{item.activity_name}}" bindinput="onActivityInput" />
      <textarea class="textarea" placeholder="活动描述" data-index="{{index}}" data-field="description" value="{{item.description}}" bindinput="onActivityInput"></textarea>
      <input class="input" type="number" placeholder="时长（分钟）" data-index="{{index}}" data-field="duration" value="{{item.duration}}" bindinput="onActivityInput" />
      <button size="mini" type="warn" data-index="{{index}}" bindtap="removeActivity">删除</button>
    </view>

    <button class="primary" bindtap="handleSubmit" loading="{{loading}}">保存教案</button>
  </view>
</view>
